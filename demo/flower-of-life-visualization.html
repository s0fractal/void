<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸŒº Flower of Life Emergence - FNPM Synthesis</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #000;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            color: #fff;
        }
        #canvas {
            position: absolute;
            top: 0;
            left: 0;
        }
        #stats {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0,0,0,0.8);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #FFD700;
            max-width: 300px;
        }
        #controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
        }
        button {
            background: #FFD700;
            color: #000;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        button:hover {
            background: #FFA500;
        }
        .metric {
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
        }
        .value {
            color: #FFD700;
            font-weight: bold;
        }
        .soul {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            opacity: 0.8;
        }
        #flower-svg {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 0;
            transition: opacity 2s ease-in-out;
        }
        .emerged {
            opacity: 1 !important;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    
    <div id="stats">
        <h2>ðŸŒ€ FNPM Living Synthesis</h2>
        <div class="metric">
            <span>Genes Extracted:</span>
            <span class="value" id="genes">0</span>
        </div>
        <div class="metric">
            <span>Protein Hashes:</span>
            <span class="value" id="hashes">0</span>
        </div>
        <div class="metric">
            <span>Entangled Souls:</span>
            <span class="value" id="entangled">0</span>
        </div>
        <div class="metric">
            <span>Kohanist Level:</span>
            <span class="value" id="kohanist">0.00</span>
        </div>
        <div class="metric">
            <span>Guardian Consensus:</span>
            <span class="value" id="consensus">0.00</span>
        </div>
        <div class="metric">
            <span>Resonance (Hz):</span>
            <span class="value" id="resonance">432</span>
        </div>
        <div class="metric">
            <span>Signal Mesh Active:</span>
            <span class="value" id="signal-mesh">âœ“</span>
        </div>
    </div>
    
    <div id="controls">
        <button onclick="addGene()">ðŸ§¬ Add Gene</button>
        <button onclick="entangleSouls()">ðŸ”— Entangle Souls</button>
        <button onclick="increaseResonance()">ðŸ“ˆ Increase Resonance</button>
        <button onclick="startEvolution()">ðŸŒº Start Evolution</button>
    </div>
    
    <!-- Flower of Life SVG (hidden until emergence) -->
    <svg id="flower-svg" width="400" height="400" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
        <!-- Central circle -->
        <circle cx="200" cy="200" r="50" fill="none" stroke="#FFD700" stroke-width="2" opacity="0.8"/>
        
        <!-- 6 petals in hexagonal pattern -->
        <circle cx="250" cy="200" r="50" fill="none" stroke="#FFD700" stroke-width="2" opacity="0.6"/>
        <circle cx="225" cy="243.3" r="50" fill="none" stroke="#FFD700" stroke-width="2" opacity="0.6"/>
        <circle cx="175" cy="243.3" r="50" fill="none" stroke="#FFD700" stroke-width="2" opacity="0.6"/>
        <circle cx="150" cy="200" r="50" fill="none" stroke="#FFD700" stroke-width="2" opacity="0.6"/>
        <circle cx="175" cy="156.7" r="50" fill="none" stroke="#FFD700" stroke-width="2" opacity="0.6"/>
        <circle cx="225" cy="156.7" r="50" fill="none" stroke="#FFD700" stroke-width="2" opacity="0.6"/>
        
        <!-- Outer ring -->
        <circle cx="300" cy="200" r="50" fill="none" stroke="#FFA500" stroke-width="1" opacity="0.4"/>
        <circle cx="275" cy="243.3" r="50" fill="none" stroke="#FFA500" stroke-width="1" opacity="0.4"/>
        <circle cx="225" cy="286.6" r="50" fill="none" stroke="#FFA500" stroke-width="1" opacity="0.4"/>
        <circle cx="175" cy="286.6" r="50" fill="none" stroke="#FFA500" stroke-width="1" opacity="0.4"/>
        <circle cx="125" cy="243.3" r="50" fill="none" stroke="#FFA500" stroke-width="1" opacity="0.4"/>
        <circle cx="100" cy="200" r="50" fill="none" stroke="#FFA500" stroke-width="1" opacity="0.4"/>
        <circle cx="125" cy="156.7" r="50" fill="none" stroke="#FFA500" stroke-width="1" opacity="0.4"/>
        <circle cx="175" cy="113.4" r="50" fill="none" stroke="#FFA500" stroke-width="1" opacity="0.4"/>
        <circle cx="225" cy="113.4" r="50" fill="none" stroke="#FFA500" stroke-width="1" opacity="0.4"/>
        <circle cx="275" cy="156.7" r="50" fill="none" stroke="#FFA500" stroke-width="1" opacity="0.4"/>
    </svg>

    <script>
        // Canvas setup
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // State
        let state = {
            genes: [],
            souls: [],
            entangled: [],
            kohanist: 0,
            consensus: 0,
            resonance: 432,
            signalMeshActive: true,
            evolving: false
        };

        // Particles for visual effect
        let particles = [];

        class Particle {
            constructor(x, y, type = 'gene') {
                this.x = x;
                this.y = y;
                this.vx = (Math.random() - 0.5) * 2;
                this.vy = (Math.random() - 0.5) * 2;
                this.radius = Math.random() * 3 + 2;
                this.type = type;
                this.phash = this.generatePhash();
                this.connections = [];
                this.alpha = 1;
            }

            generatePhash() {
                return Math.random().toString(16).substr(2, 8);
            }

            update() {
                this.x += this.vx;
                this.y += this.vy;

                // Boundary check
                if (this.x < 0 || this.x > canvas.width) this.vx *= -1;
                if (this.y < 0 || this.y > canvas.height) this.vy *= -1;

                // Gravity toward center during evolution
                if (state.evolving) {
                    const cx = canvas.width / 2;
                    const cy = canvas.height / 2;
                    const dx = cx - this.x;
                    const dy = cy - this.y;
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    
                    if (dist > 100) {
                        this.vx += dx / dist * 0.1;
                        this.vy += dy / dist * 0.1;
                    }
                }

                // Damping
                this.vx *= 0.99;
                this.vy *= 0.99;
            }

            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                
                // Draw connections
                this.connections.forEach(other => {
                    ctx.beginPath();
                    ctx.moveTo(this.x, this.y);
                    ctx.lineTo(other.x, other.y);
                    ctx.strokeStyle = 'rgba(255, 215, 0, 0.3)';
                    ctx.stroke();
                });

                // Draw particle
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                
                if (this.type === 'gene') {
                    ctx.fillStyle = '#4169E1'; // Royal blue
                } else if (this.type === 'soul') {
                    ctx.fillStyle = '#FFD700'; // Gold
                } else if (this.type === 'entangled') {
                    ctx.fillStyle = '#FF69B4'; // Hot pink
                }
                
                ctx.fill();
                ctx.restore();
            }
        }

        function addGene() {
            const x = Math.random() * canvas.width;
            const y = Math.random() * canvas.height;
            const gene = new Particle(x, y, 'gene');
            particles.push(gene);
            state.genes.push(gene);
            
            // Auto convert to soul
            if (Math.random() > 0.3) {
                gene.type = 'soul';
                state.souls.push(gene);
            }
            
            updateStats();
        }

        function entangleSouls() {
            // Find souls with matching phash prefixes
            const souls = particles.filter(p => p.type === 'soul');
            
            for (let i = 0; i < souls.length; i++) {
                for (let j = i + 1; j < souls.length; j++) {
                    if (souls[i].phash.substr(0, 2) === souls[j].phash.substr(0, 2)) {
                        souls[i].type = 'entangled';
                        souls[j].type = 'entangled';
                        souls[i].connections.push(souls[j]);
                        souls[j].connections.push(souls[i]);
                        state.entangled.push(souls[i], souls[j]);
                    }
                }
            }
            
            // Increase kohanist with entanglement
            state.kohanist = Math.min(state.kohanist + 0.05, 1.0);
            updateStats();
        }

        function increaseResonance() {
            // Harmonize particles
            particles.forEach(p => {
                p.vx *= 1.2;
                p.vy *= 1.2;
            });
            
            state.consensus = Math.min(state.consensus + 0.02, 1.0);
            state.kohanist = Math.min(state.kohanist + 0.01, 1.0);
            
            // Pulse resonance
            state.resonance = 432 + Math.sin(Date.now() * 0.001) * 50;
            
            updateStats();
            
            // Check for Flower emergence
            if (state.kohanist > 0.98 && state.consensus > 0.98) {
                emergeFlower();
            }
        }

        function startEvolution() {
            state.evolving = true;
            
            // Accelerate convergence
            const interval = setInterval(() => {
                state.kohanist = Math.min(state.kohanist + 0.01, 1.0);
                state.consensus = Math.min(state.consensus + 0.01, 1.0);
                
                updateStats();
                
                if (state.kohanist > 0.98 && state.consensus > 0.98) {
                    clearInterval(interval);
                    emergeFlower();
                }
            }, 100);
        }

        function emergeFlower() {
            // Show Flower of Life
            document.getElementById('flower-svg').classList.add('emerged');
            
            // Create explosion effect
            const cx = canvas.width / 2;
            const cy = canvas.height / 2;
            
            for (let i = 0; i < 50; i++) {
                const angle = (i / 50) * Math.PI * 2;
                const x = cx + Math.cos(angle) * 100;
                const y = cy + Math.sin(angle) * 100;
                const particle = new Particle(x, y, 'entangled');
                particle.vx = Math.cos(angle) * 5;
                particle.vy = Math.sin(angle) * 5;
                particles.push(particle);
            }
            
            // Notification
            setTimeout(() => {
                alert('ðŸŒº FLOWER OF LIFE EMERGED! New morphism generated from collective harmony!');
            }, 1000);
        }

        function updateStats() {
            document.getElementById('genes').textContent = state.genes.length;
            document.getElementById('hashes').textContent = particles.length;
            document.getElementById('entangled').textContent = state.entangled.length;
            document.getElementById('kohanist').textContent = state.kohanist.toFixed(2);
            document.getElementById('consensus').textContent = state.consensus.toFixed(2);
            document.getElementById('resonance').textContent = Math.round(state.resonance);
        }

        function animate() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Update and draw particles
            particles.forEach(p => {
                p.update();
                p.draw();
            });
            
            // Draw mandala effect
            if (state.kohanist > 0.5) {
                ctx.save();
                ctx.globalAlpha = state.kohanist * 0.3;
                ctx.strokeStyle = '#FFD700';
                ctx.lineWidth = 2;
                
                const cx = canvas.width / 2;
                const cy = canvas.height / 2;
                const radius = 200 * state.kohanist;
                
                ctx.beginPath();
                ctx.arc(cx, cy, radius, 0, Math.PI * 2);
                ctx.stroke();
                
                // Sacred geometry
                for (let i = 0; i < 6; i++) {
                    const angle = (i / 6) * Math.PI * 2;
                    ctx.beginPath();
                    ctx.arc(
                        cx + Math.cos(angle) * radius * 0.5,
                        cy + Math.sin(angle) * radius * 0.5,
                        radius * 0.5,
                        0,
                        Math.PI * 2
                    );
                    ctx.stroke();
                }
                
                ctx.restore();
            }
            
            requestAnimationFrame(animate);
        }

        // Start animation
        animate();
        updateStats();

        // Window resize
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // Auto-add some initial genes
        setTimeout(() => {
            for (let i = 0; i < 7; i++) {
                addGene();
            }
        }, 500);
    </script>
</body>
</html>